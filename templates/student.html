<!DOCTYPE html>
<html>
<head>
  <title>Student Attendance</title>
  <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>
  <h2>Student Check-In</h2>
  <form method="post" action="/student/submit">
    <input type="hidden" name="session_id" id="session_id">
    <label>Your Name:</label>
    <input type="text" name="name" required>
    <button type="submit">Submit</button>
  </form>

  <h3>Scan QR Code:</h3>
  <div id="reader" style="width:300px"></div>

  <script>
    function onScanSuccess(decodedText) {
      document.getElementById("session_id").value = decodedText;
      alert("Session ID captured: " + decodedText + ". Now enter your name and submit!");
    }
    const html5QrCode = new Html5Qrcode("reader");
    Html5Qrcode.getCameras().then(devices => {
      if (devices && devices.length) {
        html5QrCode.start(devices[0].id, { fps: 10, qrbox: 250 }, onScanSuccess);
      }
    });
  </script>
</body>
</html>
